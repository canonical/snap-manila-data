###############################################################################
# [ WARNING ]
# manila-data configuration file maintained by a snap
# local changes will be overwritten.
###############################################################################

[DEFAULT]
rootwrap_config = {{ snap_paths.common }}/etc/manila/rootwrap.conf
debug = {{ settings.debug }}
use_syslog = True
use_stderr = True
auth_strategy = keystone
state_path = {{ snap_paths.common }}/lib/manila
transport_url = {{ rabbitmq.url }}

[database]
connection = {{ database.url }}
connection_recycle_time = 20
max_pool_size = 2

[oslo_messaging_rabbit]
rabbit_quorum_queue = True

[oslo_concurrency]
lock_path = {{ snap_paths.common }}/lib/manila/tmp

{% if settings.enable_telemetry_notifications -%}
[oslo_messaging_notifications]
driver = messagingv2
{%- endif %}
